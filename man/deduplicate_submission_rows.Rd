% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CleaningSimplification.R
\name{deduplicate_submission_rows}
\alias{deduplicate_submission_rows}
\title{Deduplicate submissions by submission ID}
\usage{
deduplicate_submission_rows(
  x,
  id_col = 1,
  time_col = NULL,
  keep = c("last", "first"),
  return_flat = FALSE,
  quiet = FALSE
)
}
\arguments{
\item{x}{A data frame of responses, or a list from \code{\link[=flatten_submission_records]{flatten_submission_records()}}.}

\item{id_col}{Integer or character. Submission ID column (default 1).}

\item{time_col}{Optional column name to use for ordering. If \code{NULL}, the
function tries common timestamp names automatically.}

\item{keep}{One of \code{"last"} (default) or \code{"first"}.}

\item{return_flat}{Logical. If \code{TRUE} and \code{x} came from \code{\link[=flatten_submission_records]{flatten_submission_records()}},
include the updated list as \code{flat} in the output.}

\item{quiet}{Logical. If \code{FALSE}, prints a short summary.}
}
\value{
A list with:
\describe{
\item{data}{Deduplicated data frame (the cleaned data)}
\item{summary}{List with counts and the time column used}
\item{flat}{If \code{return_flat = TRUE}, the updated flatten_submission_records-style list (for workflows that expect \code{FlatResponses})}
}
}
\description{
Keeps one row per submission ID, using a timestamp column when available
(for example \code{created} or \code{modified}), otherwise keeps first/last row.
If audit logging is active (see \code{\link[=start_audit_log]{start_audit_log()}}), this action is recorded.
}
\examples{
\dontrun{
flat <- flatten_submission_records(fetch_form_responses(form_id = "123", api_key = "abc"))
dedup <- deduplicate_submission_rows(flat, id_col = "submissionId")
nrow(dedup$data)
}
}
